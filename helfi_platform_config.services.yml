services:
  helfi_platform_config.helper.block_installer:
    class: Drupal\helfi_platform_config\Helper\BlockInstaller
    arguments:
      - '@theme_handler'
      - '@entity_type.manager'
      - '@language_manager'

  helfi_platform_config.menu_language_filter:
    class: Drupal\helfi_platform_config\Menu\FilterByLanguage
    arguments:
      - '@router.admin_context'
    tags:
      - { name: event_subscriber }

  helfi_platform_config.translation_writer_command:
    class: Drupal\helfi_platform_config\Commands\TranslationWriterCommand
    arguments: ['@language_manager','@string_translation', '@file_system']
    tags:
      - { name: drush.command }

  helfi_platform_config.route_subscriber:
    class: Drupal\helfi_platform_config\EventSubscriber\RouteSubscriber
    arguments: ['@current_route_match']
    tags:
      - { name: event_subscriber }

  helfi_platform_config.entity_version_matcher:
    class: Drupal\helfi_platform_config\EntityVersionMatcher
    arguments: ['@entity_type.manager', '@current_route_match', '@language_manager']

  helfi_platform_config.twig.DrupalEntityRevision:
    class: Drupal\helfi_platform_config\TwigExtension\DrupalEntityRevision
    tags:
      - { name: twig.extension }

  helfi_platform_config.config_update_helper:
    class: Drupal\helfi_platform_config\Helper\ConfigUpdate
    arguments:
      - '@config.installer'
      - '@config_rewrite.config_rewriter'
