services:
  _defaults:
    autowire: true
    autoconfigure: true

  logger.channel.helfi_search:
    parent: logger.channel_base
    arguments: ['helfi_search']

  Drupal\helfi_search\TokenUsageTracker: ~

  Drupal\helfi_search\EmbeddingsModelInterface:
    class: Drupal\helfi_search\OpenAI\EmbeddingsApi

  Drupal\helfi_search\EventSubscriber\SearchApiSubscriber: ~
  Drupal\helfi_search\Plugin\search_api\datasource\UuidContentEntityTrackingManager:
    arguments: ['@entity_type.manager', '@language_manager', '@search_api.task_manager']

  helfi_search.elastic_client:
    class: Elastic\Elasticsearch\Client
    factory: ['@Drupal\helfi_platform_config\ClientBuilder', 'create']
    arguments:
      $timeout: 5
