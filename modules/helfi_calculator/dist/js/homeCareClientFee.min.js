(()=>{var e=Object.defineProperty;var t=(t,a)=>e(t,"name",{value:a,configurable:true});function a(e,t,{firstPerWeekPrice:a}){return{form_id:e,has_required_fields:true,items:[{input_integer:{id:"household_size",label:t("household_size"),unit:t("unit_person"),min:1,size:2,required:true,helper_text:t("household_size_explanation")}},{input_float:{id:"gross_income_per_month",label:t("gross_income_per_month"),unit:t("unit_euro"),min:0,size:8,required:false,strip:"[€eE ]",helper_text:t("gross_income_per_month_explanation")}},{input_integer:{id:"monthly_usage",label:t("monthly_usage"),unit:t("unit_hour"),min:0,max:744,size:3,required:true,helper_text:t("monthly_usage_explanation")}},{heading:{text:t("living_at_home_heading"),level:3}},{paragraph:{text:t("living_at_home_paragraph")}},{heading:{text:t("safetyphone_heading"),level:4}},{paragraph:{text:t("safetyphone_paragraph")}},{radio:{id:"safetyphone",label:t("safetyphone"),required:true,radio_items:[{name:"safetyphone",item_id:"safetyphone_1",label:t("yes_calculate"),value:1},{name:"safetyphone",item_id:"safetyphone_2",label:t("no"),value:2}]}},{group:{id:"safetyphone_group",hide_group:true,items:[{paragraph:{text:t("safetyphone_emergency_visit_explanation"),class:"hdbt-helper-text"}}]}},{heading:{text:t("shopping_service_heading"),level:4}},{paragraph:{text:t("shopping_service_paragraph")}},{radio:{id:"shopping_service",label:t("shopping_service"),required:true,helper_text:t("shopping_service_per_week_explanation",{first_per_week_price:a}),radio_items:[{name:"shopping_service",item_id:"shopping_service_1",label:t("yes_calculate"),value:1},{name:"shopping_service",item_id:"shopping_service_2",label:t("no"),value:2}]}},{heading:{text:t("meal_service_heading"),level:4}},{paragraph:{text:t("meal_service_paragraph")}},{radio:{id:"meal_service",label:t("meal_service"),required:true,radio_items:[{name:"meal_service",item_id:"meal_service_1",label:t("yes_calculate"),value:1},{name:"meal_service",item_id:"meal_service_2",label:t("no"),value:2}]}},{group:{id:"meal_service_group",hide_group:true,items:[{input_integer:{id:"meal_service_per_week",label:t("meal_service_per_week"),unit:t("unit_amount"),min:1,max:7,size:2,required:true,helper_text:t("meal_service_per_week_explanation")}}]}}]}}t(a,"getFormData");var i={getFormData:a};var s={household_size:{fi:"Talouden koko",sv:"Hushållets storlek",en:"Household size"},household_size_explanation:{fi:"Samassa osoitteessa asuvien perheenjäsenten määrä.",sv:"Antal familjemedlemmar som bor på samma adress.",en:"The number of family members living at the same address."},gross_income_per_month:{fi:"Talouden bruttotulot kuukaudessa",sv:"Hushållets bruttoinkomster per månad",en:"Household's gross income per month"},gross_income_per_month_explanation:{fi:"Koko talouden yhteenlasketut ansio- ja pääomatulot ennen verojen vähentämistä. Tuloihin lasketaan palkka, eläke-, vuokra- ja korkotulot sekä eläkkeensaajan hoitotuki. Jos jätät kentän tyhjäksi, lasketaan arvio korkeimman maksun mukaisesti.",sv:"Hela hushållets sammanlagda förvärvs- och kapitalinkomster före skatteavdrag. I inkomsterna ingår lön, pensions-, hyres och ränteinkomster samt vårdbidrag för pensionstagare. Om du lämnar fältet tomt beräknas bedömningen enligt den högsta avgiften.",en:"The entire household's combined income from earnings and capital income before taxes. Income includes salary, wages, pension, rental and interest income as well as care allowance for pensioners. If you leave the field blank, the estimate will be calculated using the highest fee."},monthly_usage:{fi:"Kotihoidon tuntimäärä kuukaudessa",sv:"Antal hemvårdstimmar per månad",en:"Number of hours of home care per month"},monthly_usage_explanation:{fi:"Löydät tuntimäärän kotihoidon palvelu- ja hoitosuunnitelmasta.",sv:"Du hittar antalet timmar i hemvårdens service- och vårdplan.",en:"You can find the number of hours in the home care service and care plan."},living_at_home_heading:{fi:"Kotona asumista tukevat palvelut",sv:"Tjänster som stöder hemmaboende",en:"Services to support living at home"},living_at_home_paragraph:{fi:"Voit laskea mukaan kotona asumista tukevia palveluja. Tukipalvelut ovat maksullisia.",sv:"Du kan inkludera tjänster som stöder hemmaboende. Stödtjänsterna är avgiftsbelagda.",en:"You can include services supporting living at home. The support services are subject to a fee."},safetyphone_heading:{fi:"Turvapuhelin ja turvaranneke",sv:"Trygghetstelefon och säkerhetsarmband",en:"Safety phone and bracelet"},safetyphone_paragraph:{fi:"Turvapuhelinpalveluun kuuluu turvapuhelin ja turvaranneke, joilla saat tarvittaessa apua ympäri vuorokauden. Turvapuhelinpalvelun maksut riippuvat talouden tuloista.",sv:"I trygghetstelefontjänsten ingår en trygghetstelefon och ett säkerhetsarmband genom vilka du vid behov får hjälp dygnet runt. Avgifterna för säkerhetstelefontjänsten beror på hushållets inkomster.",en:"The safety phone service includes a safety phone and a safety bracelet to call for help around the clock. The charges for the safety phone service depend on the income of the household."},safetyphone:{fi:"Laske arvioon turvapuhelin ja turvaranneke",sv:"Inkludera en trygghetstelefon och ett säkerhetsarmband i bedömningen",en:"Include the safety phone and safety bracelet in the estimate"},safetyphone_emergency_visit_explanation:{fi:"Huomiothan, että turvapalveluiden hälytyskäynti maksaa 23,25 € tai 46,50 € kerta tulorajoistasi riippuen. Kuukausittain laskutamme enintään 5 hälytyskäyntiä, eli tulorajoistasi riippuen enintään 116,25 € tai 232,50 € kuukaudessa.",sv:"Observera, att ett larmbesök från trygghetstjänsten kostar 23,25 € eller 46,50 € per gång, beroende på dina inkomstgränser. Vi fakturerar högst 5 larmbesök per månad. Det vill säga, beroende på dina inkomstgränser, max 116,25 € eller 232,50 € per månad.",en:"Please note that an emergency visit from the safety services costs EUR 23.25 or EUR 46.50 per visit, depending on your income limits. Each month, you will be billed for a maximum of five emergency visits, totalling no more than EUR 116.25 or EUR 232.50, depending on your income limits."},yes_calculate:{fi:"Kyllä, laske arvioon.",sv:"Ja, inkludera i bedömningen.",en:"Yes, include them in the estimate."},no:{fi:"Ei",sv:"Nej",en:"No"},shopping_service_heading:{fi:"Kauppapalvelu",sv:"Butiksservice:",en:"Grocery delivery service"},shopping_service_paragraph:{fi:"Kauppapalvelussa tilaamasi ruokaostokset toimitetaan kotiovellesi. Kauppapalvelun hintaan kuuluu yksi ruokaostosten keräily ja toimitus viikossa.",sv:"Butiksservicen levererar de livsmedelsinköp som du beställer till din dörr. I priset för butiksservicen ingår samling och leverans av livsmedelsinköp en gång i veckan.",en:"The grocery delivery service delivers the groceries that you order through the service to your door. The price of the grocery delivery service includes the collection and delivery of the groceries once a week."},shopping_service:{fi:"Laske arvioon kauppapalvelu",sv:"Inkludera butiksservicen i bedömningen",en:"Include the grocery delivery service in the estimate"},shopping_service_per_week_explanation:{fi:"Yksi toimitus viikossa maksaa ${first_per_week_price} euroa.",sv:"En leverans per vecka kostar ${first_per_week_price} euro.",en:"One delivery per week costs ${first_per_week_price} euros."},meal_service_heading:{fi:"Ateriapalvelu",sv:"Måltidstjänst",en:"Meal service"},meal_service_paragraph:{fi:"Ateriapalvelussa kotiisi kuljetetaan valmiita lounasaterioita, jotka voit itse lämmittää. Ateriapalvelun hintaan kuuluu lounasaterian hinta ja kuljetusmaksu.",sv:"I måltidstjänsten levereras färdiga lunchmåltider hem till dig, som du själv kan värma upp. I priset för måltidstjänsten ingår priset för lunchmåltiderna och leveransavgiften.",en:"The meal service transports to your home ready-made lunch meals, which you can heat up yourself. The price of the meal service includes the price of a lunch meal and a delivery fee."},meal_service:{fi:"Laske arvioon ateriapalvelu",sv:"Inkludera måltidstjänsten i bedömningen",en:"Include the meal service in the estimate"},meal_service_per_week:{fi:"Aterioiden määrä viikossa",sv:"Antal måltider per vecka",en:"Number of meals per week"},meal_service_per_week_explanation:{fi:"Voit tilata ateriapalvelun hinnaston mukaisia lounasaterioita enintään 7 ateriaa viikossa.",sv:"Du kan beställa högst sju måltider per vecka enligt måltidstjänstens prislista.",en:"You can order up to 7 lunch meals according to the meal service price list per week."},receipt_estimate_of_payment:{fi:"Arvio kotihoidon asiakasmaksusta",sv:"Bedömning av klientavgiften för hemvård",en:"Estimated home care client fee"},receipt_family_estimated_payment_prefix:{fi:"Arvioitu asiakasmaksu on yhteensä",sv:"Den beräknade klientavgiften är totalt",en:"The total estimated client fee is"},receipt_family_estimated_payment_suffix:{fi:"euroa kuukaudessa.",sv:"euro per månad.",en:"euros per month."},receipt_family_estimated_payment_explanation_min:{fi:"Alle ${minimum_payment_euro} euron maksuja ei laskuteta. ",sv:"Inga avgifter under ${minimum_payment_euro} euro debiteras. ",en:"Fees of less than ${minimum_payment_euro} euros will not be charged. "},receipt_family_empty_income:{fi:"Arvio on laskettu korkeimman maksun mukaisesti, koska et täyttänyt laskuriin talouden kuukausituloja. ",sv:"Bedömningen har beräknats enligt den högsta avgiften, eftersom du inte fyllde i hushållets månadsinkomster i räknaren. ",en:"Since you did not enter the household's monthly income in the calculator, the estimate was calculated using the highest fee. "},receipt_family_estimated_payment_explanation:{fi:"Tämä arvio on suuntaa antava. Tarkka arvo lasketaan kotihoidon päätökseen.",sv:"Denna bedömning är riktgivande. Det exakta värdet beräknas för beslutet om hemvård.",en:"This estimate is indicative only. The exact value will be calculated for the home care decision."},receipt_estimate_is_based_on:{fi:"Arvio muodostuu seuraavista tiedoista:",sv:"Bedömningen görs enligt följande uppgifter:",en:"The estimate consists of the following:"},receipt_subtotal_euros_per_month:{fi:"${value} €/kk",sv:"${value} euro/månad",en:"${value} €/month"},receipt_subtotal_euros_per_month_screenreader:{fi:"${value} euroa kuukaudessa",sv:"${value} euro per månad",en:"${value} euros per month"},receipt_homecare_payment:{fi:"Kotihoidon asiakasmaksu",sv:"Klientavgift för hemvården",en:"Home care client fee"},receipt_homecare_payment_two_or_more:{fi:"Jos molemmat puolisot ovat jatkuvan ja säännöllisen kotihoidon kuukausimaksuasiakkaita, maksu jakautuu kummallekin palvelu- ja hoitosuunnitelman mukaisesti.",sv:"Om båda makarna betalar en månatlig avgift för kontinuerlig och regelbunden hemvård, fördelas avgiften mellan dem i enlighet med service- och vårdplanen.",en:"If both spouses are clients of continuous and regular home care with a monthly fee, the fee is divided between them in accordance with their service and care plans."},receipt_shopping_service_math_single:{fi:"1 kauppatoimitus viikossa, kuukausihintaan on laskettu 4 toimitusta.",sv:"1 butiksleverans per vecka, 4 leveranser ingår i månadspriset.",en:"1 grocery delivery per week; the monthly fee includes 4 deliveries."},receipt_shopping_service_explanation:{fi:"Kunkin viikon toimitus maksaa ${first_per_week} euroa.",sv:"Leveransen varje vecka kostar ${first_per_week} euro.",en:"The delivery each week costs ${first_per_week} euros."},receipt_aria_live:{fi:"Kotihoidon asiakasmaksun arvio on ${payment} euroa kuukaudessa, lue lisätietoja lomakkeen alta.",sv:"Den beräknade klientavgiften för hemvården är ${payment} euro per månad, mer information under blanketten.",en:"The estimated home care client fee is ${payment} euros per month; read more under the form."},receipt_meal_service_count_single:{fi:"1 lounasateria viikossa, kuukausihintaan on laskettu 4 ateriaa.",sv:"1 lunchmåltid per vecka, 4 måltider ingår i månadspriset.",en:"1 lunch meal per week; the monthly fee includes 4 meals."},receipt_meal_service_count_multiple:{fi:"${meals_per_week} lounasateriaa viikossa, kuukausihintaan on laskettu ${meals_per_month} ateriaa.",sv:"${meals_per_week} lunchmåltider per vecka, i månadspriset ingår ${meals_per_month} måltider.",en:"${meals_per_week} lunch meals per week; the monthly fee includes ${meals_per_month} meals."},receipt_meal_service_price:{fi:"Yksittäisen lounasaterian hinta on ${meal_service_price} euroa. Lämpimän aterian lisäksi voit tilata maksullisen jälkiruuan. Voit tilata ateriapalvelun hinnaston mukaisia lounasaterioita enintään 7 ateriaa viikossa, muut ateriat ovat omakustanteisia.",sv:"Priset på en lunchmåltid är ${meal_service_price} euro. Förutom en varm måltid kan du också beställa en avgiftsbelagd efterrätt. Du kan beställa högst sju måltider per vecka enligt måltidstjänstens prislista, de övriga måltiderna på egen bekostnad.",en:"The price of a single lunch meal is ${meal_service_price} euros. In addition to a hot meal, you can order a dessert for a fee. You can order up to 7 lunch meals according to the meal service price list per week; any additional meals are at your own expense."},receipt_meal_service_delivery_price:{fi:"Ateriat toimitetaan kotiin 1-2 kertaa viikossa. Kuljetuksia on yksi, kun tilattuja aterioita on 1-3, ja kuljetuksia on kaksi, kun aterioita on 4 tai enemmän.",sv:"Måltiderna levereras hem 1-2 gånger per vecka. Det görs en leverans för 1-3 beställda måltider, och två leveranser för 4 eller fler måltider.",en:"The meals will be delivered to your home once or twice a week: once a week if you order 1-3 meals, twice a week if you order 4 or more meals."}};var r=s;var n=class e{static calculateClientFee(e,a,i,s,r,n,l=false){function o(e,t){const a=Object.keys(t).reverse();for(let i=0;i<a.length;i++){const s=a[i];if(Number(s)<=e){return t[s]}}throw new Error(`Minimum range not found for ${e} from ${t}`)}t(o,"getMinimumRange");const u=o(s,n.monthly_usage_max_payment);const m=o(e,n.household_size);let c=0;const h=Number(Object.keys(n.household_size).at(-1));const _=e-h;if(_>0){c=_*n.household_size_beyond_defined_multiplier_euro}const p=m.gross_income_limit+c;const d=o(s,m.monthly_usage_percentage);let v=u;if(i!==null){v=(a-p)*(d/100)}const k=r.clamp(0,v,u);if(l){console.debug(`maximumPayment\t${u}`,`\ngrossIncomeLimit\t${p}`,`\npaymentPercentage\t${d}`,`\nreferencePayment\t${v}`)}return k}constructor(a,s){this.id=a;const n=JSON.parse(s);const l=t(()=>i.getFormData(this.id,this.t,{firstPerWeekPrice:this.calculator.formatFinnishEuroCents(n.shopping_service_prices.first_per_week)}),"getFormData");const o=t(()=>{const e=[{field:"safetyphone",group:"safetyphone_group"},{field:"meal_service",group:"meal_service_group"}];e.forEach(({field:e,group:t})=>{if(this.calculator.getFieldValue(e)==="1"){this.calculator.showGroup(t)}else{this.calculator.hideGroup(t)}})},"update");const u=t(()=>{const t=[];t.push(...this.calculator.validateBasics("household_size"));t.push(...this.calculator.validateBasics("gross_income_per_month"));t.push(...this.calculator.validateBasics("monthly_usage"));t.push(...this.calculator.validateBasics("safetyphone"));t.push(...this.calculator.validateBasics("shopping_service"));t.push(...this.calculator.validateBasics("meal_service"));const a=this.calculator.getFieldValue("meal_service");if(a==="1"){t.push(...this.calculator.validateBasics("meal_service_per_week"))}if(t.length){return{error:{title:this.t("missing_input"),message:t}}}const i=Number(this.calculator.getFieldValue("household_size"));const s=Number(this.calculator.getFieldValue("gross_income_per_month"));const r=this.calculator.getFieldValue("gross_income_per_month");const l=Number(this.calculator.getFieldValue("monthly_usage"));const o=this.calculator.getFieldValue("safetyphone");const u=this.calculator.getFieldValue("shopping_service");const m=Number(this.calculator.getFieldValue("meal_service_per_week"));let c=this.t("receipt_family_estimated_payment_explanation");const h=e.calculateClientFee(i,s,r,l,this.calculator,n,false);if(r===null){c=this.t("receipt_family_empty_income")+c}const _={title:this.t("receipt_homecare_payment"),has_details:false,details:[],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(h)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month_screenreader",{value:this.calculator.formatEuroCents(h)})};if(i>=2){_.has_details=true;_.details.push(this.t("receipt_homecare_payment_two_or_more"))}const p=[_];const d=[];let v=0;if(o==="1"){const e=this.calculator.getMinimumRange(i,n.safetyphone_limits);const t=r===null?Infinity:s;v=this.calculator.getMinimumRange(t,e);p.push({title:this.t("safetyphone_heading"),has_details:false,details:[],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(v)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month_screenreader",{value:this.calculator.formatEuroCents(v)})})}let k=0;let f=0;const g=1;if(u==="1"){k=n.shopping_service_prices.first_per_week;f=k*4;p.push({title:this.t("shopping_service_heading"),has_details:true,details:[this.t("receipt_shopping_service_math_single",{delivery_count_per_week:g,delivery_count_per_month:g*4}),this.t("receipt_shopping_service_explanation",{first_per_week:this.calculator.formatFinnishEuroCents(n.shopping_service_prices.first_per_week)})],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(f)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month_screenreader",{value:this.calculator.formatEuroCents(f)})})}let y=0;let b=0;let w=0;if(a==="1"){y=m*n.meal_service_prices.lunch;if(m<=n.meal_service_prices.max_meals_for_single_delivery_per_week){b=1}else{b=2}w=y*4;p.push({title:this.t("meal_service_heading"),has_details:true,details:[this.t(m===1?"receipt_meal_service_count_single":"receipt_meal_service_count_multiple",{meals_per_week:m,meals_per_month:m*4}),this.t("receipt_meal_service_price",{meal_service_price:this.calculator.formatFinnishEuroCents(n.meal_service_prices.lunch),meal_deliveries_per_week:b,meal_deliveries_per_month:b*4}),this.t("receipt_meal_service_delivery_price")],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(w)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month_screenreader",{value:this.calculator.formatEuroCents(w)})})}const j=h+v+f+w;const x={id:this.id,title:this.t("receipt_estimate_of_payment"),total_prefix:this.t("receipt_family_estimated_payment_prefix"),total_value:this.calculator.formatFinnishEuroCents(j),total_suffix:this.t("receipt_family_estimated_payment_suffix"),total_explanation:c,hr:true,breakdown:{title:this.t("receipt_estimate_is_based_on"),subtotals:p,additional_details:d}};const $=this.calculator.getPartialRender("{{>receipt}}",x);return{receipt:$,ariaLive:this.t("receipt_aria_live",{payment:j})}},"validate");const m={submit:t(e=>{this.calculator.clearResult();e.preventDefault();const t=u();this.calculator.renderResult(t)},"submit"),keydown:t(()=>{o()},"keydown"),change:t(()=>{o()},"change"),reset:t(()=>{window.setTimeout(o,1);this.calculator.clearResult();this.calculator.showAriaLiveText(this.t("reset_aria_live"))},"reset")};this.calculator=window.helfiCalculator({name:"homeCareClientFee",translations:r});this.t=(e,t)=>this.calculator.translate(e,t);this.settings=this.calculator.parseSettings(s);this.calculator.init({id:a,formData:l(),eventHandlers:m})}};t(n,"HomeCareClientFee");var l=n;window.helfiCalculator=window.helfiCalculator||{};window.helfiCalculator.home_care_client_fee=(e,t)=>new l(e,t);var o=l.calculateClientFee})();