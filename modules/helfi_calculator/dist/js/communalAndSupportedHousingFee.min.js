(()=>{var e=Object.defineProperty;var t=(t,a)=>e(t,"name",{value:a,configurable:true});function a(e,t,a){return{form_id:e,has_required_fields:true,items:[{input_integer:{id:"household_size",label:t("household_size"),unit:t("unit_person"),min:1,max:6,size:2,required:true,helper_text:t("household_size_explanation")}},{input_float:{id:"gross_income_per_month",label:t("gross_income_per_month"),unit:t("unit_euro"),min:0,size:8,required:false,strip:"[€eE ]",helper_text:t("gross_income_per_month_explanation")}},{input_integer:{id:"monthly_usage",label:t("monthly_usage"),unit:t("unit_hour"),min:0,max:744,size:3,required:true,helper_text:t("monthly_usage_explanation")}},{heading:{text:t("supporting_services_heading"),level:3}},{paragraph:{text:t("supporting_services_paragraph")}},{heading:{text:t("safety_phone_and_bracelet_heading"),level:4}},{paragraph:{text:t("safety_phone_and_bracelet_paragraph")}},{radio:{id:"safety_phone_and_bracelet",label:t("label_safety_phone_and_bracelet"),required:true,radio_items:[{name:"safety_phone_and_bracelet",item_id:"safety_phone_and_bracelet_true",label:t("label_safety_phone_and_bracelet_true"),value:true},{name:"safety_phone_and_bracelet",item_id:"safety_phone_and_bracelet_false",label:t("label_safety_phone_and_bracelet_false"),value:false}]}},{group:{id:"safetyphone_group",hide_group:true,items:[{paragraph:{text:t("helper_safety_phone_and_bracelet",{price_per_visit_low_income:a.safety_phone_and_bracelet_true.price_per_visit_low_income,price_per_visit_high_income:a.safety_phone_and_bracelet_true.price_per_visit_high_income,max_price_per_month_low_income:a.safety_phone_and_bracelet_true.max_price_per_month_low_income,max_price_per_month_high_income:a.safety_phone_and_bracelet_true.max_price_per_month_high_income}),class:"hdbt-helper-text"}}]}},{heading:{text:t("grocery_delivery_service_heading"),level:4}},{paragraph:{text:t("grocery_delivery_service_paragraph")}},{radio:{id:"grocery_delivery_service",label:t("label_grocery_delivery_service"),helper_text:t("helper_grocery_delivery_service",{per_delivery:a.grocery_delivery_service.price_per_delivery}),required:true,radio_items:[{name:"grocery_delivery_service",item_id:"grocery_delivery_service_true",label:t("label_grocery_delivery_service_true"),value:true},{name:"grocery_delivery_service",item_id:"grocery_delivery_service_false",label:t("label_grocery_delivery_service_false"),value:false}]}},{heading:{text:t("meal_service_heading"),level:4}},{paragraph:{text:t("meal_service_paragraph")}},{radio:{id:"meal_service",label:t("label_meal_service"),helper_text:t("helper_meal_service",{full_service_price:a.meal_service_true_full_service,partial_service_price:a.meal_service_true_partial_service}),required:true,radio_items:[{name:"meal_service",item_id:"meal_service_true_full_service",label:t("label_meal_service_true_full_service"),value:"full_service"},{name:"meal_service",item_id:"meal_service_true_partial_service",label:t("label_meal_service_true_partial_service"),value:"partial_service"},{name:"meal_service",item_id:"meal_service_false",label:t("label_meal_service_false"),value:false}]}}]}}t(a,"getFormData");var i={getFormData:a};var r={household_size:{fi:"Talouden koko",sv:"Hushållets storlek",en:"Household size"},household_size_explanation:{fi:"Samassa osoitteessa asuvien perheenjäsenten määrä.",sv:"Antal familjemedlemmar som bor på samma adress.",en:"The number of family members living at the same address."},gross_income_per_month:{fi:"Talouden bruttotulot kuukaudessa",sv:"Hushållets bruttoinkomster per månad",en:"Household's gross income per month"},gross_income_per_month_explanation:{fi:"Koko talouden yhteenlasketut ansio- ja pääomatulot ennen verojen vähentämistä. Tuloihin lasketaan palkka, eläke-, vuokra- ja korkotulot sekä eläkkeensaajan hoitotuki. Jos jätät kentän tyhjäksi, lasketaan arvio korkeimman maksun mukaisesti.",sv:"Hela hushållets sammanlagda förvärvs- och kapitalinkomster före skatteavdrag. I inkomsterna ingår lön, pensions-, hyres och ränteinkomster samt vårdbidrag för pensionstagare. Om du lämnar fältet tomt beräknas bedömningen enligt den högsta avgiften.",en:"The entire household's combined income from earnings and capital income before taxes. Income includes salary, wages, pension, rental and interest income as well as care allowance for pensioners. If you leave the field blank, the estimate will be calculated using the highest fee."},monthly_usage:{fi:"Palvelun tuntimäärä kuukaudessa",sv:"Antal servicetimmar per månad",en:"Number of service hours per month"},monthly_usage_explanation:{fi:"Löydät tuntimäärän sinulle tehdystä palvelupäätöksestä.",sv:"Du hittar ett antal timmar i servicebeslutet som fattats för dig.",en:"You can find the number of service hours in the service decision made for you."},supporting_services_heading:{fi:"Kotona asumista tukevat palvelut",sv:"Tjänster som stöder hemmaboende",en:"Services to support living at home"},supporting_services_paragraph:{fi:"Voit laskea mukaan kotona asumista tukevia palveluja. Tukipalvelut ovat maksullisia.",sv:"Du kan inkludera tjänster som stöder hemmaboende. Stödtjänsterna är avgiftsbelagda.",en:"You can include services supporting living at home. The support services are subject to a fee."},safety_phone_and_bracelet_heading:{fi:"Turvapuhelin ja turvaranneke",sv:"Trygghetstelefon och säkerhetsarmband",en:"Safety phone and bracelet"},safety_phone_and_bracelet_paragraph:{fi:"Turvapuhelinpalveluun kuuluu turvapuhelin ja turvaranneke, joilla saat tarvittaessa apua ympäri vuorokauden. Turvapuhelinpalvelun maksut riippuvat talouden tuloista.",sv:"I trygghetstelefontjänsten ingår en trygghetstelefon och ett säkerhetsarmband genom vilka du vid behov får hjälp dygnet runt. Avgifterna för säkerhetstelefontjänsten beror på hushållets inkomster.",en:"The safety phone service includes a safety phone and a safety bracelet to call for help around the clock. The charges for the safety phone service depend on the income of the household."},label_safety_phone_and_bracelet:{fi:"Laske arvioon turvapuhelin ja turvaranneke",sv:"Inkludera en trygghetstelefon och ett säkerhetsarmband i bedömningen",en:"Include the safety phone and safety bracelet in the estimate"},helper_safety_phone_and_bracelet:{fi:"Huomiothan, että turvapalveluiden hälytyskäynti maksaa ${price_per_visit_low_income} € tai ${price_per_visit_high_income} € kerta tulorajoistasi riippuen. Kuukausittain laskutamme enintään 5 hälytyskäyntiä eli tulorajoistasi riippuen enintään ${max_price_per_month_low_income} € tai ${max_price_per_month_high_income} € kuukaudessa.",sv:"Observera, att ett larmbesök från trygghetstjänsten kostar ${price_per_visit_low_income} € eller ${price_per_visit_high_income} € per gång, beroende på dina inkomstgränser. Vi fakturerar högst 5 larmbesök per månad. Det vill säga, beroende på dina inkomstgränser, max ${max_price_per_month_low_income} € eller ${max_price_per_month_high_income} € per månad.",en:"Please note that an emergency visit from the safety services costs EUR ${price_per_visit_low_income} or EUR ${price_per_visit_high_income} per visit, depending on your income limits. Each month, you will be billed for a maximum of five emergency visits, totalling no more than EUR ${max_price_per_month_low_income} or EUR ${max_price_per_month_high_income}, depending on your income limits."},label_safety_phone_and_bracelet_false:{fi:"Ei",sv:"Nej",en:"No"},label_safety_phone_and_bracelet_true:{fi:"Kyllä, laske arvioon",sv:"Ja, inkludera i bedömningen.",en:"Yes, include them in the estimate."},grocery_delivery_service_heading:{fi:"Kauppapalvelu",sv:"Butiksservice",en:"Grocery delivery service"},grocery_delivery_service_paragraph:{fi:"Kauppapalvelussa tilaamasi ruokaostokset toimitetaan kotiovellesi. Kauppapalvelun hintaan kuuluu yksi ruokaostosten keräily ja toimitus viikossa.",sv:"Butiksservicen levererar de livsmedelsinköp som du beställer till din dörr. I priset för butiksservicen ingår samling och leverans av livsmedelsinköp en gång i veckan.",en:"The grocery delivery service delivers the groceries that you order through the service to your door. The price of the grocery delivery service includes the collection and delivery of the groceries once a week."},label_grocery_delivery_service:{fi:"Laske arvioon ruokakaupan kotiinkuljetuspalvelu",sv:"Inkludera matbutikens hemleveranstjänst i bedömningen",en:"Include the grocery store home delivery service in the estimate"},helper_grocery_delivery_service:{fi:"Yksi toimitus viikossa maksaa ${per_delivery} euroa.",sv:"En leverans per vecka kostar ${per_delivery} euro.",en:"One delivery per week costs ${per_delivery} euros."},label_grocery_delivery_service_false:{fi:"Ei",sv:"Nej",en:"No"},label_grocery_delivery_service_true:{fi:"Kyllä, laske arvioon",sv:"Ja, inkludera i bedömningen.",en:"Yes, include them in the estimate."},meal_service_heading:{fi:"Ateriapalvelu",sv:"Måltidstjänst",en:"Meal service"},meal_service_paragraph:{fi:"Ateriapalvelussa kotiisi kuljetetaan valmiita lounasaterioita, jotka voit itse lämmittää. Ateriapalvelun hintaan kuuluu lounasaterian hinta ja kuljetusmaksu.",sv:"I måltidstjänsten levereras färdiga lunchmåltider hem till dig, som du själv kan värma upp. I priset för måltidstjänsten ingår priset för lunchmåltiderna och leveransavgiften.",en:"The meal service transports to your home ready-made lunch meals, which you can heat up yourself. The price of the meal service includes the price of a lunch meal and a delivery fee."},label_meal_service:{fi:"Laske arvioon ateriapalvelu",sv:"Inkludera måltidstjänsten i bedömningen",en:"Include the meal service in the estimate"},helper_meal_service:{fi:"Puolihoito maksaa kuussa ${partial_service_price} euroa. Täysihoito maksaa kuussa ${full_service_price} euroa.",sv:"Halvpension kostar ${partial_service_price} € per månad. Helpension kostar ${full_service_price} € per månad.",en:"Half-board costs ${partial_service_price} euros per month. Full-board costs ${full_service_price} euros per month."},label_meal_service_true_full_service:{fi:"Kyllä, laske arvioon täysihoito.",sv:"Ja, inkludera helpension i bedömningen",en:"Yes, include the full-board meal service in the estimate."},label_meal_service_true_partial_service:{fi:"Kyllä, laske arvioon puolihoito.",sv:"Ja, inkludera halvpension i bedömningen",en:"Yes, include the half-board meal service in the estimate."},label_meal_service_false:{fi:"Ei",sv:"Nej",en:"No"},receipt_estimate_of_payment:{fi:"Arvio yhteisöllisen ja tuetun asumisen asiakasmaksusta",sv:"Bedömning av klientavgiften för gemenskapligt boende och stödboende",en:"Estimated communal and supported housing client fee"},receipt_estimated_payment_prefix:{fi:"Arvioitu asiakasmaksu on yhteensä",sv:"Den beräknade klientavgiften är totalt",en:"The total estimated client fee is"},receipt_estimated_payment_suffix:{fi:"euroa kuukaudessa.",sv:"euro per månad.",en:"euros per month."},receipt_estimated_payment_explanation:{fi:"Tämä arvio on suuntaa antava. Tarkka arvo lasketaan yhteisöllisen ja tuetun asumisen päätökseen.",sv:"Denna bedömning är riktgivande. Det exakta värdet beräknas för beslutet om gemenskapligt boende och stödboende.",en:"This estimate is indicative only. The exact value will be calculated for the communal and supported housing decision."},receipt_estimate_of_payment_breakdown_title:{fi:"Arvio muodostuu seuraavista tiedoista:",sv:"Bedömningen görs enligt följande uppgifter:",en:"The estimate consists of the following:"},communal_and_supported_housing_payment:{fi:"Yhteisöllisen ja tuetun asumisen asiakasmaksu",sv:"Klientavgift för gemenskapligt boende och stödboende",en:"Client fee for communal and supported housing"},communal_and_supported_housing_payment_per_month:{fi:"Yhteisöllisen ja tuetun asumisen asiakasmaksu on",sv:"Klientavgiften för gemenskapligt boende och stödboende är",en:"The client fee for communal and supported housing is"},receipt_subtotal_euros_per_month:{fi:"${value} €/kk",sv:"${value} euro/månad",en:"${value} €/month"},safety_phone_and_bracelet_payment:{fi:"Turvapuhelin ja turvaranneke",sv:"Trygghetstelefon och säkerhetsarmband",en:"Safety phone and bracelet"},grocery_delivery_service_payment:{fi:"Kauppapalvelu",sv:"Butiksservice",en:"Grocery delivery service"},meal_service_payment:{fi:"Ateriapalvelu",sv:"Måltidstjänst",en:"Meal service"},grocery_delivery_service_payment_additional_details_text_1:{fi:"1 kauppatoimitus viikossa, kuukausihintaan on laskettu 4 toimitusta.",sv:"1 butiksleverans per vecka, 4 leveranser ingår i månadspriset.",en:"1 grocery delivery per week; the monthly fee includes 4 deliveries."},grocery_delivery_service_payment_additional_details_text_2:{fi:"Kunkin viikon toimitus maksaa ${per_delivery} euroa.",sv:"Leveransen varje vecka kostar ${per_delivery} euro.",en:"The delivery each week costs ${per_delivery} euros."}};var s=r;var n=class e{constructor(e,a){this.id=e;const r=JSON.parse(a);const n=t(()=>i.getFormData(this.id,this.t,r),"getFormData");const l=t(()=>{const e=[{field:"safety_phone_and_bracelet",group:"safetyphone_group"}];e.forEach(({field:e,group:t})=>{if(this.calculator.getFieldValue(e)==="true"){this.calculator.showGroup(t)}else{this.calculator.hideGroup(t)}})},"update");const o=t(()=>{const e=[];e.push(...this.calculator.validateBasics("household_size"));e.push(...this.calculator.validateBasics("gross_income_per_month"));e.push(...this.calculator.validateBasics("monthly_usage"));e.push(...this.calculator.validateBasics("safety_phone_and_bracelet"));e.push(...this.calculator.validateBasics("grocery_delivery_service"));e.push(...this.calculator.validateBasics("meal_service"));if(e.length){return{error:{title:this.t("missing_input"),message:e}}}const a=Number(this.calculator.getFieldValue("household_size"));const i=Number(this.calculator.getFieldValue("gross_income_per_month"));const s=this.calculator.getFieldValue("gross_income_per_month");const n=Number(this.calculator.getFieldValue("monthly_usage"));const l=this.calculator.getFieldValue("safety_phone_and_bracelet");const o=this.calculator.getFieldValue("grocery_delivery_service");const _=this.calculator.getFieldValue("meal_service");const u=r.income_limit[a];const{max:c,percent:h}=this.calculator.getMinimumRange(n,r.monthly_usage);const m=h[a];let p=c;if(s!==null){p=(i-u)*(m/100)}p=this.calculator.clamp(0,Math.round(p*100)/100,c);const d=[];let v=p;const f=t(e=>{if(typeof e==="string"){return parseFloat(e.replace(",","."))}return e},"transformToFloat");if(p){d.push({title:this.t("communal_and_supported_housing_payment"),has_details:false,details:[],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(p)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatEuroCents(p)})})}if(l==="true"){let e=0;if(a===1){if(i<=r.safety_phone_and_bracelet_true.single_income_limit){e=f(r.safety_phone_and_bracelet_true.single_low_income)}else{e=f(r.safety_phone_and_bracelet_true.single_high_income)}}else{if(i<=r.safety_phone_and_bracelet_true.couple_income_limit){e=f(r.safety_phone_and_bracelet_true.couple_low_income)}else{e=f(r.safety_phone_and_bracelet_true.couple_high_income)}}v+=e;d.push({title:this.t("safety_phone_and_bracelet_payment"),has_details:true,details:[this.t("helper_safety_phone_and_bracelet",{price_per_visit_low_income:r.safety_phone_and_bracelet_true.price_per_visit_low_income,price_per_visit_high_income:r.safety_phone_and_bracelet_true.price_per_visit_high_income,max_price_per_month_low_income:r.safety_phone_and_bracelet_true.max_price_per_month_low_income,max_price_per_month_high_income:r.safety_phone_and_bracelet_true.max_price_per_month_high_income})],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(e)})})}if(o==="true"){const e=f(r.grocery_delivery_service.price_per_month);v+=e;d.push({title:this.t("grocery_delivery_service_payment"),has_details:true,details:[this.t("grocery_delivery_service_payment_additional_details_text_1"),this.t("grocery_delivery_service_payment_additional_details_text_2",{per_delivery:r.grocery_delivery_service.price_per_delivery})],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(e)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatEuroCents(e)})})}if(_!=="false"){let e=0;if(_==="full_service"){e=f(r.meal_service_true_full_service)}else if(_==="partial_service"){e=f(r.meal_service_true_partial_service)}v+=e;d.push({title:this.t("meal_service_payment"),has_details:false,details:[],sum:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatFinnishEuroCents(e)}),sum_screenreader:this.t("receipt_subtotal_euros_per_month",{value:this.calculator.formatEuroCents(e)})})}const g={id:this.id,title:this.t("receipt_estimate_of_payment"),total_prefix:this.t("receipt_estimated_payment_prefix"),total_value:this.calculator.formatFinnishEuroCents(v),total_suffix:this.t("receipt_estimated_payment_suffix"),total_explanation:this.t("receipt_estimated_payment_explanation"),hr:true,breakdown:[{title:this.t("receipt_estimate_of_payment_breakdown_title"),subtotals:d}]};const y=this.calculator.getPartialRender("{{>receipt}}",g);return{receipt:y,ariaLive:this.t("receipt_aria_live",{total_payment:v})}},"validate");const _={submit:t(e=>{this.calculator.clearResult();e.preventDefault();const t=o();this.calculator.renderResult(t)},"submit"),keydown:t(()=>{l()},"keydown"),change:t(()=>{l()},"change"),reset:t(()=>{window.setTimeout(l,1);this.calculator.clearResult();this.calculator.showAriaLiveText(this.t("reset_aria_live"))},"reset")};this.calculator=window.helfiCalculator({name:"communalAndSupportedHousingFee",translations:s});this.t=(e,t)=>this.calculator.translate(e,t);this.settings=this.calculator.parseSettings(a);this.calculator.init({id:e,formData:n(),eventHandlers:_})}};t(n,"CommunalAndSupportedHousingFee");var l=n;window.helfiCalculator=window.helfiCalculator||{};window.helfiCalculator.communal_and_supported_housing_fee=(e,t)=>new l(e,t)})();