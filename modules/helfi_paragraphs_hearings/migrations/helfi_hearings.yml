langcode: en
status: true
dependencies:
  enforced:
    module:
      - helfi_paragraphs_hearings
id: helfi_hearings
migration_tags:
  - helfi_hearings
migration_group: helfi_hearings
label: 'Helfi hearings'
source:
  constants:
    HEARING_BASE_URL: 'https://kerrokantasi.hel.fi/'
  plugin: helfi_hearings
  url: 'https://api.hel.fi/kerrokantasi/v1/hearing/?format=json&open=true'
  track_changes: true
  translatable_fields:
    - title
process:
  field_external_id: id
  id: id
  title: title
  langcode: langcode
  uid:
    plugin: default_value
    default_value: 1
  field_comments: n_comments
  field_url:
    plugin: concat
    source:
      - constants/HEARING_BASE_URL
      - slug
  field_main_image: main_image_url
  field_main_image_caption: main_image_caption
  published_at:
    plugin: format_date
    source: open_at
    from_format: 'Y-m-d\TH:i:s\Z'
    to_format: 'U'
    from_timezone: 'Europe/Helsinki'
    to_timezone: 'UTC'
  unpublish_on:
    plugin: format_date
    source: close_at
    from_format: 'Y-m-d\TH:i:s\Z'
    to_format: 'U'
    from_timezone: 'Europe/Helsinki'
    to_timezone: 'UTC'
destination:
  plugin: entity_complete:node
  translations: true
  default_bundle: hearing
