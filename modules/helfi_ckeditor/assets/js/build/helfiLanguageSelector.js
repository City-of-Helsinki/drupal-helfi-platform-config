!function(e){const a=e.en=e.en||{};a.dictionary=Object.assign(a.dictionary||{},{Afrikaans:"Afrikaans",Albanian:"Albanian",Amharic:"Amharic",Arabic:"Arabic",Armenian:"Armenian",Asturian:"Asturian",Azerbaijani:"Azerbaijani","Bahasa Malaysia":"Bahasa Malaysia",Basque:"Basque",Belarusian:"Belarusian",Bengali:"Bengali",Bosnian:"Bosnian",Bulgarian:"Bulgarian",Burmese:"Bulgarian",Catalan:"Catalan",Chichewa:"Chichewa",Chinese:"Chinese","Chinese, Simplified":"Chinese, Simplified","Chinese, Traditional":"Chinese, Traditional",Corsican:"Corsican",Croatian:"Croatian",Czech:"Czech",Danish:"Danish",Dutch:"Dutch",English:"English",Esperanto:"Esperanto",Estonian:"Estonian",Faeroese:"Faeroese",Filipino:"Filipino",Finnish:"Finnish",French:"French",Frisian:"Frisian","Frisian, Western":"Frisian, Western",Gaelic:"Gaelic",Galician:"Galician",Georgian:"Georgian",German:"German",Greek:"Greek",Gujarati:"Gujarati","Haitian Creole":"Haitian Creole",Hausa:"Hausa",Hebrew:"Hebrew",Hindi:"Hindi",Hungarian:"Hungarian",Icelandic:"Icelandic",Igbo:"Igbo",Indonesian:"Indonesian",Irish:"Irish",Italian:"Italian",Japanese:"Japanese",Javanese:"Javanese",Kannada:"Kannada",Kazakh:"Kazakh",Khmer:"Khmer",Kinyarwanda:"Kinyarwanda",Korean:"Korean",Kurdish:"Kurdish","Kurdish (Kurmanji)":"Kurdish (Kurmanji)",Kyrgyz:"Kyrgyz",Lao:"Lao",Latin:"Latin",Latvian:"Latvian",Lithuanian:"Lithuanian",Luxembourgish:"Luxembourgish",Macedonian:"Macedonian",Malagasy:"Malagasy",Malay:"Malay",Malayalam:"Malayalam",Maltese:"Maltese",Maori:"Maori",Marathi:"Marathi",Mongolian:"Mongolian","Myanmar (Burmese)":"Myanmar (Burmese)",Nepali:"Nepali",Norwegian:"Norwegian","Norwegian Bokmål":"Norwegian Bokmål","Norwegian Nynorsk":"Norwegian Nynorsk",Occitan:"Occitan","Odia (Oriya)":"Odia (Oriya)",Pashto:"Pashto",Persian:"Persian","Persian, Farsi":"Persian, Farsi",Polish:"Polish",Portuguese:"Portuguese",Punjabi:"Punjabi","Remove language from text":"Remove language from text",Romanian:"Romanian",Russian:"Russian",Sami:"Sami",Samoan:"Samoan","Select language":"Select language",Serbian:"Serbian",Sesotho:"Sesotho",Shona:"Shona",Sindhi:"Sindhi",Sinhala:"Sinhala",Slovak:"Slovak",Slovenian:"Slovenian",Somali:"Somali",Spanish:"Spanish",Sundanese:"Sundanese",Swahili:"Swahili",Swedish:"Swedish","Swiss German":"Swiss German",Tajik:"Tajik",Tamil:"Tamil","Tamil, Sri Lanka":"Tamil, Sri Lanka",Tatar:"Tatar",Telugu:"Telugu",Thai:"Thai",Tibetan:"Tibetan",Turkish:"Turkish",Turkmen:"Turkmen",Tuvan:"Tuvan",Ukrainian:"Ukrainian",Urdu:"Urdu",Uyghur:"Uyghur",Uzbek:"Uzbek",Vietnamese:"Vietnamese",Welsh:"Welsh",Xhosa:"Xhosa",Yiddish:"Yiddish",Yoruba:"Yoruba",Zulu:"Zulu"})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),function(e,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.CKEditor5=a():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.helfiLanguageSelector=a())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,a,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,a,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/utils.js":(e,a,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/utils.js")},"ckeditor5/src/widget.js":(e,a,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},a={};function i(n){var t=a[n];if(void 0!==t)return t.exports;var r=a[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.d=(e,a)=>{for(var n in a)i.o(a,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},i.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);var n={};return(()=>{"use strict";i.d(n,{default:()=>m});var e=i("ckeditor5/src/core.js"),a=i("ckeditor5/src/widget.js"),t=i("ckeditor5/src/utils.js");function r(e,a){return`${e}:${a=a||(0,t.getLanguageDirection)(e)}`}function s(e){const[a,i]=e.split(":");return{languageCode:a,textDirection:i}}class o extends e.Command{execute({languageCode:e,textDirection:a}){const{model:i}=this.editor,n=i.document,{selection:t}=n,s=!!e&&r(e,a);i.change((e=>{const a=t.getFirstPosition(),n=a.textNode||a.nodeBefore;if(t.isCollapsed)s?e.setSelectionAttribute("helfiLanguageSelector",s):n?e.removeAttribute("helfiLanguageSelector",e.createRangeOn(n)):e.removeSelectionAttribute("helfiLanguageSelector");else{const a=i.schema.getValidRanges(t.getRanges(),"helfiLanguageSelector");let n=a.next();for(;!n.done;){const i=n.value;s?e.setAttribute("helfiLanguageSelector",s,i):e.removeAttribute("helfiLanguageSelector",i),n=a.next()}}}))}refresh(){const{model:e}=this.editor,{selection:a}=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(a,"helfiLanguageSelector")}_getValueFromFirstAllowedNode(){const{model:e}=this.editor,{schema:a}=e,{selection:i}=e.document;if(i.isCollapsed)return i.getAttribute("helfiLanguageSelector")||!1;const n=i.getRanges();let t=n.next();for(;!t.done;){const e=t.value.getItems();let i=e.next();for(;!i.done;){const n=i.value;if(a.checkAttribute(n,"helfiLanguageSelector"))return n.getAttribute("helfiLanguageSelector")||!1;i=e.next()}t=n.next()}return!1}}class l extends e.Plugin{static get requires(){return[a.Widget]}static get pluginName(){return"HelfiLanguageSelectorEditing"}constructor(e){super(e),this.editor=e,this.helfiLanguageSelectorConfig=this.editor.config.get("helfiLanguageSelector"),this.currentLanguage=this.helfiLanguageSelectorConfig?.current_language}init(){const{editor:e}=this,{conversion:a}=this.editor;e.model.schema.extend("$text",{allowAttributes:"helfiLanguageSelector"}),e.model.schema.setAttributeProperties("helfiLanguageSelector",{copyOnEnter:!0}),a.for("upcast").elementToAttribute({model:{key:"helfiLanguageSelector",value:e=>{const a=e.getAttribute("lang")??"",i=e.getAttribute("dir")??"",n=a.replace(/([a-z]{2})-[a-z]{2}/g,"$1");if(n.toLowerCase()!==this.currentLanguage.toLowerCase())return r(n.toLowerCase(),i.toLowerCase())}},view:{name:"span",attributes:{lang:/[\s\S]+/}}}),a.for("downcast").attributeToElement({model:"helfiLanguageSelector",view:(e,{writer:a},i)=>{if(!e)return;if(!i.item.is("$textProxy")&&!i.item.is("documentSelection"))return;const{languageCode:n,textDirection:t}=s(e);return a.createAttributeElement("span",{lang:n,dir:t})}}),e.commands.add("helfiLanguageSelectorCommand",new o(e))}}var u=i("ckeditor5/src/ui.js");class c extends u.View{constructor(e,a){super(e,a);const i=this.bindTemplate,{t:n}=e;this.editor=a,this.set("isOpen",!1),this.set("label"),this.set("id",null),this.setTemplate({tag:"select",attributes:{id:i.to("id"),class:["ck-helfi-select-list",i.if("isOpen","ck-is-open",(e=>e))],open:i.if("isOpen"),placeholder:n("Select language")},on:{keydown:i.to((e=>{e.target===this.element&&e.keyCode===(0,t.getCode)("space")&&(this.isOpen=!this.isOpen)}))}})}focus(){this.element.focus()}}function h(e){if(!e)return;const{languageCode:a}=s(e);return a||void 0}class g extends e.Plugin{constructor(e){super(e),this.editor=e,this.advancedChildren=new t.Collection,this.helfiLanguageSelectorConfig=this.editor.config.get("helfiLanguageSelector"),this.languageList=this.helfiLanguageSelectorConfig?.language_list,this.updateSelection=!1,function(e){const{t:a}=e;a("Afrikaans"),a("Albanian"),a("Amharic"),a("Arabic"),a("Armenian"),a("Asturian"),a("Azerbaijani"),a("Bahasa Malaysia"),a("Basque"),a("Belarusian"),a("Bengali"),a("Bosnian"),a("Bulgarian"),a("Burmese"),a("Catalan"),a("Chichewa"),a("Chinese"),a("Chinese, Simplified"),a("Chinese, Traditional"),a("Corsican"),a("Croatian"),a("Czech"),a("Danish"),a("Dutch"),a("Dzongkha"),a("English"),a("Esperanto"),a("Estonian"),a("Faeroese"),a("Filipino"),a("Finnish"),a("French"),a("Frisian"),a("Frisian, Western"),a("Gaelic"),a("Galician"),a("Georgian"),a("German"),a("Greek"),a("Gujarati"),a("Haitian Creole"),a("Hausa"),a("Hebrew"),a("Hindi"),a("Hungarian"),a("Icelandic"),a("Igbo"),a("Indonesian"),a("Irish"),a("Italian"),a("Japanese"),a("Javanese"),a("Kannada"),a("Kazakh"),a("Khmer"),a("Kinyarwanda"),a("Korean"),a("Kurdish (Kurmanji)"),a("Kurdish"),a("Kyrgyz"),a("Lao"),a("Latin"),a("Latvian"),a("Lithuanian"),a("Luxembourgish"),a("Macedonian"),a("Malagasy"),a("Malay"),a("Malayalam"),a("Maltese"),a("Maori"),a("Marathi"),a("Mongolian"),a("Myanmar (Burmese)"),a("Nepali"),a("Norwegian"),a("Odia (Oriya)"),a("Pashto"),a("Persian"),a("Polish"),a("Portuguese"),a("Punjabi"),a("Romanian"),a("Russian"),a("Sami"),a("Samoan"),a("Serbian"),a("Sesotho"),a("Shona"),a("Sindhi"),a("Sinhala"),a("Slovak"),a("Slovenian"),a("Somali"),a("Spanish"),a("Sundanese"),a("Swahili"),a("Swedish"),a("Swiss German"),a("Tajik"),a("Tamil"),a("Tamil, Sri Lanka"),a("Tatar"),a("Telugu"),a("Thai"),a("Tibetan"),a("Turkish"),a("Turkmen"),a("Tuvan"),a("Ukrainian"),a("Urdu"),a("Uyghur"),a("Uzbek"),a("Vietnamese"),a("Welsh"),a("Xhosa"),a("Yiddish"),a("Yoruba"),a("Zulu"),a("Norwegian Bokmål"),a("Norwegian Nynorsk"),a("Occitan"),a("Persian, Farsi")}(e.locale)}init(){const{editor:e}=this,{t:a}=e.locale,i=a("Remove language from text"),n=a("Select language");e.ui.componentFactory.add("helfiLanguageSelector",(t=>{const r=(0,u.createDropdown)(t);let s,o;r.buttonView.set({label:n,icon:'<?xml version="1.0" encoding="utf-8"?>\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n<path d="M-17.3,0.9"/>\n\t<rect x="1.3" y="1.3" width="7.9" height="1.3"/>\n\t<rect x="1.3" y="6.8" width="7.9" height="1.3"/>\n\t<rect x="1.3" y="9.5" width="7.9" height="1.3"/>\n\t<rect y="4" width="10.6" height="1.3"/>\n\t<path d="M15.9,3.6c1.6-0.2,2.9-0.5,4.1-1l-0.5-1.2c-1.2,0.5-2.6,0.8-4.2,1c-2,0.2-3.7,0-3.7,0l-0.2,1.3c0,0,0.9,0.1,2.1,0.1 c0.3,0,0.7,0,1,0v3.1h-3.6v1.3h3.6v4h-3.7v6.5h1.3v-1.3h6.5V18H20v-5.9h-4.1v-4H20V6.8h-4.1V3.6z M18.6,16.1h-6.5v-2.6h6.5V16.1z" />\n\t<path d="M1.3,18.7h1.3v-1.3h5.3V18h1.3v-5.9h-8V18.7z M7.9,13.5v2.6H2.6v-2.6H7.9z"/>\n</svg>\n',tooltip:!0}),r.extendTemplate({attributes:{class:["helfi-language-selector"]}}),r.panelView.extendTemplate({attributes:{class:["helfi-language-selector__dropdown-panel","ck-reset_all-excluded"]}});const l=this.editor.commands.get("helfiLanguageSelectorCommand");return r.on("change:isOpen",(()=>{if(o?.options&&(l.value&&!o.items.includes(h(l.value))?o.setValue([h(l.value)],!0):!l.value&&o.items.length>0&&o.clear()),s)return;s=new c(t,this.editor),r.panelView.children.add(s),r.panelPosition="sw",s.delegate("execute").to(r);const n=(e,a)=>`\n          <span style="align-items: center; display: flex; height: 100%;">\n            <span class="hel-icon--name" style="margin-left: 8px;">${a(e.title)}</span>\n          </span>\n        `,u={plugins:{remove_button:{title:i}},valueField:"languageCode",labelField:"title",searchField:"title",sortField:"title",maxOptions:null,items:[h(l.value)],options:[this.languageList.map((e=>({...e,title:a(e.title)})))],create:!1,render:{option:(e,a)=>n(e,a),item:(e,a)=>n(e,a)},onItemAdd:a=>{l.value!==a&&(l.execute({languageCode:a,textDirection:this.languageList.find((e=>e.languageCode===a)).textDirection}),e.editing.view.focus())},onItemRemove:()=>{l.value&&(l.execute({languageCode:!1}),e.editing.view.focus())}};o=new TomSelect(s.element,u)})),r}))}}class d extends e.Plugin{static get requires(){return[l,g]}}const m={HelfiLanguageSelector:d}})(),n=n.default})()));