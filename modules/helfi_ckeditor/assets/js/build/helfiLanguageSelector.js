!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CKEditor5=t():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.helfiLanguageSelector=t())}(self,(()=>(()=>{var e={"ckeditor5/src/core.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/utils.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/utils.js")},"ckeditor5/src/widget.js":(e,t,i)=>{e.exports=i("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":e=>{"use strict";e.exports=CKEditor5.dll}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";i.d(n,{default:()=>m});var e=i("ckeditor5/src/core.js"),t=i("ckeditor5/src/widget.js"),a=i("ckeditor5/src/utils.js");function r(e,t){return`${e}:${t=t||(0,a.getLanguageDirection)(e)}`}function o(e){const[t,i]=e.split(":");return{languageCode:t,textDirection:i}}class s extends e.Command{execute({languageCode:e,textDirection:t}){const{model:i}=this.editor,n=i.document,{selection:a}=n,o=!!e&&r(e,t);i.change((e=>{const t=a.getFirstPosition(),n=t.textNode||t.nodeBefore;if(a.isCollapsed)o?e.setSelectionAttribute("helfiLanguageSelector",o):n?e.removeAttribute("helfiLanguageSelector",e.createRangeOn(n)):e.removeSelectionAttribute("helfiLanguageSelector");else{const t=i.schema.getValidRanges(a.getRanges(),"helfiLanguageSelector");let n=t.next();for(;!n.done;){const i=n.value;o?e.setAttribute("helfiLanguageSelector",o,i):e.removeAttribute("helfiLanguageSelector",i),n=t.next()}}}))}refresh(){const{model:e}=this.editor,{selection:t}=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t,"helfiLanguageSelector")}_getValueFromFirstAllowedNode(){const{model:e}=this.editor,{schema:t}=e,{selection:i}=e.document;if(i.isCollapsed)return i.getAttribute("helfiLanguageSelector")||!1;const n=i.getRanges();let a=n.next();for(;!a.done;){const e=a.value.getItems();let i=e.next();for(;!i.done;){const n=i.value;if(t.checkAttribute(n,"helfiLanguageSelector"))return n.getAttribute("helfiLanguageSelector")||!1;i=e.next()}a=n.next()}return!1}}class l extends e.Plugin{static get requires(){return[t.Widget]}static get pluginName(){return"HelfiLanguageSelectorEditing"}init(){const{editor:e}=this,{conversion:t}=this.editor;e.model.schema.extend("$text",{allowAttributes:"helfiLanguageSelector"}),e.model.schema.setAttributeProperties("helfiLanguageSelector",{copyOnEnter:!0}),t.for("upcast").elementToAttribute({model:{key:"helfiLanguageSelector",value:e=>{const t=e.getAttribute("lang")??"",i=e.getAttribute("dir")??"";return r(t.toLowerCase(),i.toLowerCase())}},view:{name:"span",attributes:{lang:/[\s\S]+/}}}),t.for("downcast").attributeToElement({model:"helfiLanguageSelector",view:(e,{writer:t},i)=>{if(!e)return;if(!i.item.is("$textProxy")&&!i.item.is("documentSelection"))return;const{languageCode:n,textDirection:a}=o(e);return t.createAttributeElement("span",{lang:n,dir:a})}}),e.commands.add("helfiLanguageSelectorCommand",new s(e))}}var c=i("ckeditor5/src/ui.js");class u extends c.View{constructor(e,t){super(e,t);const i=this.bindTemplate,{t:n}=e;this.editor=t,this.set("isOpen",!1),this.set("label"),this.set("id",null),this.setTemplate({tag:"select",attributes:{id:i.to("id"),class:["ck-helfi-select-list",i.if("isOpen","ck-is-open",(e=>e))],open:i.if("isOpen"),placeholder:n("Select language")},on:{keydown:i.to((e=>{e.target===this.element&&e.keyCode===(0,a.getCode)("space")&&(this.isOpen=!this.isOpen)}))}})}focus(){this.element.focus()}}function d(e){if(!e)return;const{languageCode:t}=o(e);return t||void 0}class g extends e.Plugin{constructor(e){super(e),this.editor=e,this.advancedChildren=new a.Collection,this.helfiLanguageSelectorConfig=this.editor.config.get("helfiLanguageSelector"),this.languageList=this.helfiLanguageSelectorConfig?.language_list,this.updateSelection=!1,function(e){const{t}=e;t("Afrikaans"),t("Albanian"),t("Amharic"),t("Arabic"),t("Armenian"),t("Asturian"),t("Azerbaijani"),t("Bahasa Malaysia"),t("Basque"),t("Belarusian"),t("Bengali"),t("Bosnian"),t("Bulgarian"),t("Burmese"),t("Catalan"),t("Chichewa"),t("Chinese"),t("Chinese, Simplified"),t("Chinese, Traditional"),t("Corsican"),t("Croatian"),t("Czech"),t("Danish"),t("Dutch"),t("Dzongkha"),t("English"),t("Esperanto"),t("Estonian"),t("Faeroese"),t("Filipino"),t("Finnish"),t("French"),t("Frisian"),t("Frisian, Western"),t("Gaelic"),t("Galician"),t("Georgian"),t("German"),t("Greek"),t("Gujarati"),t("Haitian Creole"),t("Hausa"),t("Hebrew"),t("Hindi"),t("Hungarian"),t("Icelandic"),t("Igbo"),t("Indonesian"),t("Irish"),t("Italian"),t("Japanese"),t("Javanese"),t("Kannada"),t("Kazakh"),t("Khmer"),t("Kinyarwanda"),t("Korean"),t("Kurdish (Kurmanji)"),t("Kurdish"),t("Kyrgyz"),t("Lao"),t("Latin"),t("Latvian"),t("Lithuanian"),t("Luxembourgish"),t("Macedonian"),t("Malagasy"),t("Malay"),t("Malayalam"),t("Maltese"),t("Maori"),t("Marathi"),t("Mongolian"),t("Myanmar (Burmese)"),t("Nepali"),t("Norwegian"),t("Odia (Oriya)"),t("Pashto"),t("Persian"),t("Polish"),t("Portuguese"),t("Punjabi"),t("Romanian"),t("Russian"),t("Sami"),t("Samoan"),t("Serbian"),t("Sesotho"),t("Shona"),t("Sindhi"),t("Sinhala"),t("Slovak"),t("Slovenian"),t("Somali"),t("Spanish"),t("Sundanese"),t("Swahili"),t("Swedish"),t("Swiss German"),t("Tajik"),t("Tamil"),t("Tamil, Sri Lanka"),t("Tatar"),t("Telugu"),t("Thai"),t("Tibetan"),t("Turkish"),t("Turkmen"),t("Tuvan"),t("Ukrainian"),t("Urdu"),t("Uyghur"),t("Uzbek"),t("Vietnamese"),t("Welsh"),t("Xhosa"),t("Yiddish"),t("Yoruba"),t("Zulu"),t("Norwegian BokmÃ¥l"),t("Norwegian Nynorsk"),t("Occitan"),t("Persian, Farsi")}(e.locale)}init(){const{editor:e}=this,{t}=e.locale,i=t("Remove language from text"),n=t("Select language");e.ui.componentFactory.add("helfiLanguageSelector",(a=>{const r=(0,c.createDropdown)(a);let o,s;r.buttonView.set({label:n,icon:'<?xml version="1.0" encoding="utf-8"?>\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n<path d="M-17.3,0.9"/>\n\t<rect x="1.3" y="1.3" width="7.9" height="1.3"/>\n\t<rect x="1.3" y="6.8" width="7.9" height="1.3"/>\n\t<rect x="1.3" y="9.5" width="7.9" height="1.3"/>\n\t<rect y="4" width="10.6" height="1.3"/>\n\t<path d="M15.9,3.6c1.6-0.2,2.9-0.5,4.1-1l-0.5-1.2c-1.2,0.5-2.6,0.8-4.2,1c-2,0.2-3.7,0-3.7,0l-0.2,1.3c0,0,0.9,0.1,2.1,0.1 c0.3,0,0.7,0,1,0v3.1h-3.6v1.3h3.6v4h-3.7v6.5h1.3v-1.3h6.5V18H20v-5.9h-4.1v-4H20V6.8h-4.1V3.6z M18.6,16.1h-6.5v-2.6h6.5V16.1z" />\n\t<path d="M1.3,18.7h1.3v-1.3h5.3V18h1.3v-5.9h-8V18.7z M7.9,13.5v2.6H2.6v-2.6H7.9z"/>\n</svg>\n',tooltip:!0}),r.extendTemplate({attributes:{class:["helfi-language-selector"]}}),r.panelView.extendTemplate({attributes:{class:["helfi-language-selector__dropdown-panel","ck-reset_all-excluded"]}});const l=this.editor.commands.get("helfiLanguageSelectorCommand");return r.on("change:isOpen",(()=>{if(s?.options&&(l.value&&!s.items.includes(d(l.value))?s.setValue([d(l.value)],!0):!l.value&&s.items.length>0&&s.clear()),o)return;o=new u(a,this.editor),r.panelView.children.add(o),r.panelPosition="sw",o.delegate("execute").to(r);const n=(e,t)=>`\n          <span style="align-items: center; display: flex; height: 100%;">\n            <span class="hel-icon--name" style="margin-left: 8px;">${t(e.title)}</span>\n          </span>\n        `,c={plugins:{remove_button:{title:i}},valueField:"languageCode",labelField:"title",searchField:"title",sortField:"title",maxOptions:null,items:[d(l.value)],options:[this.languageList.map((e=>({...e,title:t(e.title)})))],create:!1,render:{option:(e,t)=>n(e,t),item:(e,t)=>n(e,t)},onItemAdd:t=>{l.value!==t&&(l.execute({languageCode:t,textDirection:this.languageList.find((e=>e.languageCode===t)).textDirection}),e.editing.view.focus())},onItemRemove:()=>{l.value&&(l.execute({languageCode:!1}),e.editing.view.focus())}};s=new TomSelect(o.element,c)})),r}))}}class h extends e.Plugin{static get requires(){return[l,g]}}const m={HelfiLanguageSelector:h}})(),n=n.default})()));