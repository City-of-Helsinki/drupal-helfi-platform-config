{% macro recursiveOrgChart(organization, organization_level) %}
  {% if organization.children|length %}
    {% set has_children = TRUE %}
  {% endif %}
  <li class="org-chart__item {{ has_children ? 'org-chart__item--has-children' }}">
    <span class="org-chart__item__title org-chart__item__title--level-{{ organization_level }}">{{ organization.title }}</span>
    {% if has_children %}
      <ul class="org-chart__container org-chart__container--inner">
        {% for child in organization.children %}
          {{ _self.recursiveOrgChart(child, organization_level + 1) }}
        {% endfor %}
      </ul>
    {% endif %}
  </li>
{% endmacro %}

<div{{ attributes }}>
  <ul class="org-chart__container">
    {{ _self.recursiveOrgChart(chart, 1) }}
  </ul>
</div>
